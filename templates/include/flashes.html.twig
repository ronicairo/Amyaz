<style>
/* ========================================
   FLASH MESSAGES
   ======================================== */
.flash-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 450px;
    width: calc(100% - 40px);
}

.flash-alert {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-radius: 14px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    animation: slideIn 0.4s ease;
    backdrop-filter: blur(10px);
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(100px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.flash-content {
    display: flex;
    align-items: center;
    gap: 15px;
    flex: 1;
}

.flash-icon {
    font-size: 1.4rem;
    display: flex;
    align-items: center;
}

.flash-text {
    font-family: 'Outfit', sans-serif;
    font-size: 0.95rem;
    font-weight: 500;
    line-height: 1.4;
}

.flash-close {
    background: none;
    border: none;
    font-size: 1.3rem;
    cursor: pointer;
    padding: 0;
    margin-left: 15px;
    opacity: 0.7;
    transition: opacity 0.3s ease;
}

.flash-close:hover {
    opacity: 1;
}

/* Success */
.flash-success {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.95), rgba(32, 201, 151, 0.95));
    color: white;
}

.flash-success .flash-close {
    color: white;
}

/* Danger / Error */
.flash-danger {
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.95), rgba(233, 69, 96, 0.95));
    color: white;
}

.flash-danger .flash-close {
    color: white;
}

/* Warning */
.flash-warning {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.95), rgba(248, 181, 0, 0.95));
    color: #1a1a2e;
}

.flash-warning .flash-close {
    color: #1a1a2e;
}

/* Info */
.flash-info {
    background: linear-gradient(135deg, rgba(26, 40, 77, 0.95), rgba(45, 74, 124, 0.95));
    color: white;
}

.flash-info .flash-close {
    color: white;
}

/* ========================================
   RESPONSIVE
   ======================================== */
@media (max-width: 480px) {
    .flash-container {
        top: 15px;
        right: 15px;
        left: 15px;
        width: auto;
        max-width: none;
    }
    
    .flash-alert {
        padding: 14px 16px;
        border-radius: 12px;
    }
    
    .flash-icon {
        font-size: 1.2rem;
    }
    
    .flash-text {
        font-size: 0.9rem;
    }
    
    .flash-close {
        font-size: 1.2rem;
    }
}
</style>
{% set bootstrap_classes = {
    'success': 'success',
    'error': 'danger',
    'warning': 'warning',
    'info': 'info',
    'danger': 'danger'
} %}

{% if app.flashes|length > 0 %}
<div class="flash-container">
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div role="alert" class="flash-alert flash-{{ bootstrap_classes[label] }}">
                <div class="flash-content">
                    <div class="flash-icon">
                        {% if label == 'success' %}
                            <i class="bi bi-check-circle-fill"></i>
                        {% elseif label == 'warning' %}
                            <i class="bi bi-exclamation-triangle-fill"></i>
                        {% elseif label == 'info' %}
                            <i class="bi bi-info-circle-fill"></i>
                        {% else %}
                            <i class="bi bi-x-circle-fill"></i>
                        {% endif %}
                    </div>
                    <div class="flash-text">
                        {{ message|raw }}
                    </div>
                </div>
                <button type="button" class="flash-close" data-bs-dismiss="alert" aria-label="Close">
                    <i class="bi bi-x"></i>
                </button>
            </div>
        {% endfor %}
    {% endfor %}
</div>
{% endif %}